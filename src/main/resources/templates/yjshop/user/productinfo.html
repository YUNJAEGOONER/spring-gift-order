<html layout:decorate="~{yjshop/user/layout}">
<div layout:fragment="content">
  <style>
    .product-box {
      max-width: 75%;
      margin: 40px auto;
      border: 1px solid #ddd;
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      display: flex;
      gap: 40px;
      background-color: #fff;
    }

    .product-image {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .product-image img {
      max-width: 100%;
      max-height: 400px;
      border-radius: 10px;
      border: 1px solid #ccc;
    }

    .product-details {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .product-details h3 {
      font-size: 22px;
      margin-bottom: 10px;
      border-bottom: 1px solid #ddd;
      padding-bottom: 10px;
    }

    .product-details .name {
      font-size: 20px;
      font-weight: bold;
    }

    .product-details .price {
      font-size: 18px;
      color: #2d2d2d;
    }

    .product-details select,
    .product-details input[type="number"] {
      padding: 8px;
      font-size: 15px;
      border: 1px solid #ccc;
      border-radius: 6px;
      width: 100%;
    }

    .product-actions {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 20px;
    }

    .product-actions input[type="submit"],
    .product-actions button {
      width: 100%;
      padding: 14px;
      font-size: 16px;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }

    /* ğŸ¨ ì‡¼í•‘ëª° í…Œë§ˆì— ì–´ìš¸ë¦¬ëŠ” ë²„íŠ¼ ì»¬ëŸ¬ */
    .btn-cart {
      background-color: #f9cc3d;
      color: #222;
      border: 1px solid #e0b72d;
    }

    .btn-cart:hover {
      background-color: #f2b700;
      border-color: #d9a700;
    }

    .btn-buy {
      background-color: #ff7c47;
      color: white;
      border: 1px solid #e26635;
    }

    .btn-buy:hover {
      background-color: #e76a35;
      border-color: #cc4f23;
    }
  </style>

  <div class="product-box">
    <!-- ì™¼ìª½: ì´ë¯¸ì§€ -->
    <div class="product-image">
      <img th:src="${product.imageUrl}" alt="ìƒí’ˆ ì´ë¯¸ì§€">
    </div>

    <!-- ì˜¤ë¥¸ìª½: ìƒì„¸ ì •ë³´ -->
    <div class="product-details">
      <h3>ìƒí’ˆ ì •ë³´</h3>
      <div class="name" th:text="${product.name}">ìƒí’ˆëª…</div>
      <div class="price" th:text="'â‚©' + ${product.price}">ê°€ê²©</div>

      <!-- ê³µí†µ ì˜µì…˜ ì„ íƒê³¼ ìˆ˜ëŸ‰ ì…ë ¥ -->
      <div>
        <label><strong>ì˜µì…˜ ì„ íƒ</strong></label>
        <select name="optionId" id="optionId" required>
          <option value="" disabled selected>ì˜µì…˜ì„ ì„ íƒí•˜ì„¸ìš”</option>
          <option th:each="option : ${product.options}"
                  th:value="${option.id}"
                  th:text="${option.optionName} + ' (+' + ${option.price()} + ')'">
          </option>
        </select>
      </div>

      <div style="margin-top: 10px;">
        <label><strong>ìˆ˜ëŸ‰</strong></label>
        <input type="number" name="quantity" id="quantity" min="1" value="1" required>
      </div>

      <!-- ë²„íŠ¼ 2ê°œ (ì„œë¡œ ë‹¤ë¥¸ ìš”ì²­ ì „ì†¡) -->
      <div class="product-actions">
        <!-- ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸° -->
        <form th:action="@{/view/my/wishlist}" method="post" onsubmit="return setHiddenValues(this)">
          <input type="hidden" name="optionId">
          <input type="hidden" name="quantity">
          <input type="submit" value="ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°" class="btn-cart">
        </form>

        <!-- ë°”ë¡œ êµ¬ë§¤í•˜ê¸° -->
        <form th:action="@{/view/my/payment}" method="get" onsubmit="return setHiddenValues(this)">
          <input type="hidden" name="optionId">
          <input type="hidden" name="quantity">
          <button type="submit" class="btn-buy">ë°”ë¡œ êµ¬ë§¤í•˜ê¸°</button>
        </form>
      </div>
    </div>
  </div>

  <!-- ê³µí†µ ì˜µì…˜ì„ ì–‘ìª½ formì— ë³µì‚¬í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ -->
  <script>
    function setHiddenValues(form) {
      const optionId = document.getElementById("optionId").value;
      const quantity = document.getElementById("quantity").value;
      form.querySelector('input[name="optionId"]').value = optionId;
      form.querySelector('input[name="quantity"]').value = quantity;
      return true;
    }
  </script>
</div>
</html>